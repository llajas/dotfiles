LUGIA_ART=(
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢿⣿⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣿⣿⣿⣷⣄⠀⠀⠀⢀⢿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⡀⠀⠀⠀⣿⣿⣿⣿⣿⣷⣄⠀⡜⢸⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢯⡉⠛⠲⠿⣿⣿⣿⣿⣿⣿⣿⡀⢸⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠳⣄⠀⠀⠀⠙⠻⣿⣿⣿⣿⣷⡼⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣽⣦⡀⠀⢰⡆⠈⠙⢿⢿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣦⣤⣭⣬⣥⣀⣾⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠀⠀⠀⠀⢠⣿⣿⣿⣿⣿⣆⢮⣫⣦⠈⠉⠛⠁⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣷⣄⠀⠀⢸⣿⣿⣿⣿⣯⠛⢮⣻⡽⠀⠀⣠⣾⣿⠀⠀⠀⠀⠀⠀⢠⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⣿⣿⣿⣦⢸⣿⣿⣿⣿⣿⠀⠀⣨⣭⣥⣾⡿⠟⠉⠀⠀⠀⠀⠀⠀⢸⣿⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣄⡈⠙⠿⡿⢸⣿⣿⣿⣿⣿⣇⣤⣈⠛⠛⠉⢀⣤⣾⣿⠀⠀⠀⠀⠀⠘⣿⣿⢆⡇⣀⣠⣤⡄⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣿⣿⠗⣠⣾⡞⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣌⠻⠿⠋⣁⣤⠀⠀⠀⠀⠀⢻⠟⣾⠇⣿⡿⠋⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣾⣿⣿⣷⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⣝⠻⠛⠀⠀⠀⠀⠀⢀⣾⣿⠘⠋⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⣟⢿⣿⣿⣿⣿⣮⣁⠀⠀⠀⣠⣿⣿⡏⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣾⣿⣿⣿⣿⠋⢸⣿⢿⣿⣿⣿⣿⣿⠟⠁⠀⠀⠀⠈⠻⣿⣿⣿⣿⣷⣄⡺⣿⣿⡿⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣾⣿⣿⣿⣿⡿⠁⠀⠸⠇⠀⠈⠛⢿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠘⢿⣿⣿⣿⣿⣿⣦⡙⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⣿⣿⣿⣿⡟⠁⠀⠀⣠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣷⡈⢻⣿⣿⣿⣿⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⠀⠀⣴⣿⣿⣿⣿⣿⣿⡿⠀⠀⠀⠀⣿⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⣿⠀⢻⣿⣿⣿⣿⣿⣿⣿⣷⡄⠀⠀⠀⠀⠀⠀"
"⠀⠀⠀⠀⢀⣾⣿⣿⣿⣿⣿⣿⣿⠃⠀⠀⠀⠀⢹⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⢀⣤⣿⡿⢟⣡⢻⡌⣿⣿⣿⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀"
"⠀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⡿⠀⠀⠀⠀⠀⠀⠙⠛⠿⣿⣶⡆⠲⢶⣶⣿⣿⣶⣶⢺⣿⣿⣧⠁⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⠀⠀⠀⠀"
"⠀⠀⠀⣾⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⡇⠀⠀⠀⠈⠉⠉⠀⠘⢿⣟⠟⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀"
"⠀⠀⣸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠻⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⠀⠀"
"⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⢢⠀"
"⠀⡄⣿⢻⣿⣿⡟⣿⣿⣿⣿⠻⣿⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⠇⣿⣿⣿⣿⡇⣿⣿⣿⡏⣿⣼⡆"
"⢸⡇⣿⢸⣿⣿⣿⠸⣿⣿⣿⡇⠘⢿⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠛⠿⢿⠋⠀⢸⣿⣿⣿⡇⢿⣿⣿⡇⣿⡇⠀"
"⠈⠃⣿⡼⣿⣿⣿⠀⢿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⣿⣿⣿⠃⢸⣿⣿⠇⠿⠁⠀"
"⠀⠀⠹⠇⢿⣿⣿⡆⠘⣿⣿⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⠟⠀⠸⠿⠛⠀⠀⠀⠀"
"⠀⠀⠀⠀⠈⠛⠋⠁⠀⠉⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
)
###############################################################################
#  1. Random flavour line that appears in the dialogue box at the bottom      #
###############################################################################
LUGIA_FLAVOR_LINES=(
  "The winds whisper... Lugia watches silently..."
  "The summit is silent... Only champions ascend here."
  "The waves grow restless... A presence stirs below..."
  "A storm brews outside Mt. Silver..."
  "The stars shimmer faintly... ancient powers await."
  "You're now entering Mt. Silver... A mysterious presence fills the air..."
)
FLAVOR_LINE="${LUGIA_FLAVOR_LINES[RANDOM % ${#LUGIA_FLAVOR_LINES[@]}]}"

############################
#  Trainer-panel content   #
############################
TRAINER_INFO=(
  "=== TRAINER ==="
  " ↳ Name:        $(whoami)"
  " ↳ Location:    $(hostname -f 2>/dev/null || cat /etc/hostname)"
  " ↳ Weather:     $(curl -s 'wttr.in/aus+tx?format=%C%20%t')"
  " ↳ Playtime:    $(uptime -p | sed 's/^up //' || cat /proc/uptime | awk '{print $1}' | xargs -I{} awk -v var={} 'BEGIN {printf "%d weeks, %d days, %d hours, %d minutes\n", var/604800, (var%604800)/86400, (var%86400)/3600, (var%3600)/60}')"
  " ↳ White-out:   $(awk '{print int($1/86400)}' /proc/uptime)d since party fainted"

  "=== CAMP GEAR ==="
  " ↳ Party HP:    $(free -m | awk '/^Mem:/ {printf "%d%%", 100-int($3*100/$2)}')"
  " ↳ Box Space:   $(df -h /home | awk 'NR==2{print $3 " / " $2}')"
  " ↳ ₽ Money:     $(awk '/^( *eth0:| *wlan0:)/ { gsub(":", ""); t += $2 + $10 } END { printf "%.0f\n", t / 1000 }' /proc/net/dev | numfmt --grouping)₽"

  "=== COMM LINK ==="
  " ↳ GTS:         $(ip=$(curl -s https://ipinfo.io/ip); \
                     host $ip 2>/dev/null | awk '/pointer/ {print $5}' | sed 's/\\.$//' || echo $ip)"
  " ↳ Link (LAN):  $(hostname -I | awk '{print $1}')"
  " ↳ Trainers:    $(ss -tan | awk 'NR>1{c++} END{print c}') nearby"

  "=== POKÉDEX ==="
  " ↳ Seen:        $(dpkg -l | grep -c '^ii')"
  " ↳ Caught:      $(ps ax --no-header | wc -l)"
  " ↳ Badges:      16"
)

###############################################################################
#  Build the boxed trainer panel                                              #
###############################################################################
TBOX_W=57
TRAINER_INFO_BOX=( "╔$(printf '═%.0s' $(seq 1 $((TBOX_W-2))))╗" )
for line in "${TRAINER_INFO[@]}"; do
  printf -v row "║ %-*s ║" $((TBOX_W-4)) "$line"
  TRAINER_INFO_BOX+=( "$row" )
done
TRAINER_INFO_BOX+=( "╚$(printf '═%.0s' $(seq 1 $((TBOX_W-2))))╝" )

TBOX_START=4                                  # Lugia line where panel begins

###############################################################################
#  1)  Print Lugia art first                                                  #
###############################################################################
tput clear
for art_line in "${LUGIA_ART[@]}"; do
  printf "${BOX_COLOR}%-60s${RESET_COLOR}\n" "$art_line"
done

###############################################################################
#  2)  Over-print the trainer panel at column 62                              #
#      (drawn *after* Lugia so its bottom border is never overwritten)        #
###############################################################################
# Move cursor up to the panel’s first row
tput cuu $(( ${#LUGIA_ART[@]} - TBOX_START ))

# Draw the boxed rows
for panel_row in "${TRAINER_INFO_BOX[@]}"; do
  printf "\033[62G${BOX_COLOR}%s${RESET_COLOR}\n" "$panel_row"
done

# Move cursor back down to the end of Lugia art
tput cud $(( ${#LUGIA_ART[@]} - TBOX_START - ${#TRAINER_INFO_BOX[@]} ))

###############################################################################
#  3)  Dialogue-style flavour textbox                                         #
###############################################################################
DBOX_W=56
# choose random flavour (defined earlier)
WRAPPED_FLAVOR_LINE=$(echo "$FLAVOR_LINE" | fmt -w $((DBOX_W-4)))

# draw box
printf "${BOX_COLOR}╔"; printf '═%.0s' $(seq 1 $((DBOX_W-2))); printf "╗\n"
while IFS= read -r L; do
  printf "${BOX_COLOR}║ %-*s ║\n" $((DBOX_W-4)) "$L"
done <<< "$WRAPPED_FLAVOR_LINE"
printf "${BOX_COLOR}╚"; printf '═%.0s' $(seq 1 $((DBOX_W-2))); printf "╝\n${RESET_COLOR}\n"
